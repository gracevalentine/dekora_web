<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DEKORA: Homepage</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f7f7f7;
      }
      nav {
        background: #878644;
        padding: 1em 0;
      }
      nav ul {
        list-style: none;
        display: flex;
        justify-content: center;
        margin: 0;
        padding: 0;
      }
      nav ul li {
        margin: 0 1.5em;
      }
      nav ul li a {
        color: #fff;
        text-decoration: none;
        font-weight: bold;
      }
      .container {
        max-width: 800px;
        margin: 2em auto;
        background: #fff;
        padding: 2em;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }
      .home-image {
        width: 100%;
        max-width: 400px;
        display: block;
        margin: 0 auto 2em auto;
        border-radius: 8px;
      }
      .dekorapay-section {
        background: #dce0a3;
        padding: 1.5em;
        border-radius: 8px;
        margin-top: 2em;
        text-align: center;
      }
      .saldo {
        font-size: 2em;
        color: #393807;
        margin: 0.5em 0;
      }
      .topup-btn {
        background: #393807;
        color: #fff;
        border: none;
        padding: 0.7em 2em;
        border-radius: 4px;
        font-size: 1em;
        cursor: pointer;
      }
      .topup-btn:hover {
        background: #8b8912;
      }
      footer {
        text-align: center;
        margin-top: 3em;
        color: #888;
      }
      .flash.success {
        background-color: rgb(62, 202, 57);
      }
      .flash.danger {
        color: red;
      }
    </style>
  </head>
  <body>
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %}
    <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %} {% endif %} {% endwith %}
    <nav>
      <ul
        style="
          display: flex;
          align-items: center;
          justify-content: space-between;
          max-width: 800px;
          margin: 0 auto;
          padding: 0 2em;
        "
      >
        <!-- Logo di kiri -->
        <li style="margin: 0">
          <a
            href="{{ url_for('index') }}"
            style="display: flex; align-items: center"
          >
            <img
              src="{{ url_for('static', filename='dekora.png') }}"
              alt="Dekora Logo"
              style="height: 32px; margin-right: 0.5em"
            />
          </a>
        </li>
        <!-- Menu di kanan -->
        <div style="display: flex; align-items: center">
          <li>
            <a
              href="{{ url_for('product.catalog') }}"
              style="
                background: #393807;
                color: #fff;
                padding: 0.5em 1.2em;
                border-radius: 4px;
                text-decoration: none;
                font-weight: bold;
                display: flex;
                align-items: center;
              "
            >
              <span style="margin-right: 0.5em">üîç</span>View Catalog
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('cart.cart') }}"
              style="
                background: #393807;
                color: #fff;
                padding: 0.5em 1.2em;
                border-radius: 4px;
                text-decoration: none;
                font-weight: bold;
                display: flex;
                align-items: center;
              "
            >
              <span style="margin-right: 0.5em">üõí</span>Cart
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('user.profile') }}"
              style="
                background: #393807;
                color: #fff;
                padding: 0.5em 1.2em;
                border-radius: 4px;
                text-decoration: none;
                font-weight: bold;
                display: flex;
                align-items: center;
              "
            >
              <span style="margin-right: 0.5em">üë§</span>Profile
            </a>
          </li>
          <li>
            <a
              href="{{ url_for('user.logout') }}"
              style="
                background: #393807;
                color: #fff;
                padding: 0.5em 1.2em;
                border-radius: 4px;
                text-decoration: none;
                font-weight: bold;
                display: flex;
                align-items: center;
              "
            >
              <span style="margin-right: 0.5em">üë§</span>Logout
            </a>
          </li>
        </div>
      </ul>
    </nav>
    <div class="container">
      <section class="dekorapay-section">
        <h1>DEKORA</h1>
        <p>Selamat datang di DEKORA</p>
      </section>

      <!-- Section Produk -->
      <section class="produk-section" style="margin-top: 2em">
        <h2>Produk Unggulan</h2>
        <div
          style="
            display: flex;
            flex-wrap: wrap;
            gap: 1.5em;
            justify-content: center;
          "
        >
          <div
            style="
              background: #fafafa;
              border-radius: 8px;
              box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
              padding: 1em;
              width: 180px;
              text-align: center;
            "
          >
            <img
              src="{{ url_for('static', filename='lack_table.jpeg') }}"
              alt="LACK Table"
              style="width: 150px; height: 150px; border-radius: 6px"
            />
            <h3 style="font-size: 1.1em; margin: 0.7em 0 0.3em 0">LACK Table</h3>
            <p style="color: #393807; font-weight: bold; margin: 0.3em 0">
              Rp 100.000
            </p>
            <button class="topup-btn" style="width: 100%">
              Tambah ke Cart
            </button>
          </div>
          <div
            style="
              background: #fafafa;
              border-radius: 8px;
              box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
              padding: 1em;
              width: 180px;
              text-align: center;
            "
          >
            <img
              src="{{ url_for('static', filename='malm_bed.png') }}"
              alt="MALM Bed"
              style="width: 150px; height: 150px; border-radius: 6px"
            />
            <h3 style="font-size: 1.1em; margin: 0.7em 0 0.3em 0">MALM Bed</h3>
            <p style="color: #393807; font-weight: bold; margin: 0.3em 0">
              Rp 200.000          </p>
            <button class="topup-btn" style="width: 100%">
              Tambah ke Cart
            </button>
          </div>
          <div
            style="
              background: #fafafa;
              border-radius: 8px;
              box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
              padding: 1em;
              width: 180px;
              text-align: center;
            "
          >
            <img
              src="{{ url_for('static', filename='poang_chair.jpeg') }}"
              alt="Poang Chair"
              style="width: 150px; height: 150px; border-radius: 6px"
            />
            <h3 style="font-size: 1.1em; margin: 0.7em 0 0.3em 0">Poang Chair</h3>
            <p style="color: #393807; font-weight: bold; margin: 0.3em 0">
              Rp 75.000
            </p>
            <button class="topup-btn" style="width: 100%">
              Tambah ke Cart
            </button>
          </div>
        </div>
      </section>
    </div>
    <footer>
      <p>&copy; 2023 Tugas Besar. All rights reserved.</p>
    </footer>
    <script>
      function formatRupiah(angka) {
        return "Rp " + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }

      function updateSaldo() {
        fetch("{{ url_for('user.get_wallet') }}")
          .then((res) => res.json())
          .then((data) => {
            if (data.success) {
              document.getElementById("saldo").textContent =
                "Rp " + data.wallet.toLocaleString("id-ID");
            }
          });
      }

      setTimeout(function () {
        var flash = document.querySelector(".flash.success");
        if (flash) {
          flash.style.display = "none";
        }
      }, 2000);

      updateSaldo();
    </script>
  </body>
</html>
